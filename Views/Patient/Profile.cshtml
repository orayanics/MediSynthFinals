@using Microsoft.AspNetCore.Identity;
@model dynamic;
@inject UserManager<UserCredentials> UserManager;

<table class="table">

    <tr>
        <th colspan="7">Patient Details</th>
    </tr>

    <tr>
        <th colspan="7"><a asp-action="Edit" asp-controller="Patient"><button>Edit Information</button></a></th>
    </tr>

    <tr>
        <td>Reference</td>
        <td>Full Name</td>
        <td>Address</td>
        <td>Region</td>
        <td>City</td>
        <td>Birthdate</td>
        <td>Birthplace</td>
        <td>Contact Number</td>
        <td>Occupation</td>
        <td>Religion</td>
        <td>Emergency Name</td>
        <td>Emergency Number</td>
    </tr>
    <tr>
        @foreach (PatientCredentials Model in Model.PatientCredentials)
        {
            var id = UserManager.GetUserId(User);
            if (id == Model.patientRef)
            {
                <td>@Model.patientRef</td>
                <td>@Model.fName @Model.lName</td>
                <td>@Model.address</td>
                <td>@Model.region</td>
                <td>@Model.city</td>
                <td>@Model.birthdate.ToString("MMMM dd, yyyy")</td>
                <td>@Model.birthplace</td>
                <td>@Model.contactNum</td>
                <td>@Model.occupation</td>
                <td>@Model.religion</td>
                <td>@Model.emergencyName</td>
                <td>@Model.emergencyNum</td>
            }
        }

    </tr>

</table>

<table class="table">
    <tr>
        <th colspan="3">Medical History Record</th>
    </tr>

    <tr>
        <td>Attending Doctor</td>
        <td>Medical Concern</td>
        <td>Visit Date</td>
    </tr>

    @foreach (RecordMedHistory medhis in Model.RecordMedHistory)
    {
        var id = UserManager.GetUserId(User);
        if (id == medhis.patientId)
        {
            <tr>
                <td>@medhis.attendingDoctor</td>
                <td>@medhis.medConcern</td>
                <td>@medhis.visitDate</td>
            </tr>
        }

    }
</table>

<table class="table">
    <tr>
        <th colspan="3">Diagnosis</th>
    </tr>

    <tr>
        <td>Attending Doctor</td>
        <td>Diagnosis</td>
        <td>Visit Date</td>
    </tr>
@* 
    @foreach (RecordDiagnosis diag in Model.RecordDiagnosis)
    {
        var id = ViewBag.PatientId;
        if (id == diag.patientId)
        {
            <tr>
                <td>@diag.attendingDoctor</td>
                <td>@diag.diagnosisText</td>
                <td>@diag.visitDate</td>
            </tr>
        }

    } *@
</table>